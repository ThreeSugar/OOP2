{% extends 'vidlayout.html' %}

{% block title %}
Videos
{% endblock %} 



{% block content %}
<div class="input-group">
    <input style = "margin-left:10px;" class="form-control"
                placeholder="Search here">
    <div class="input-group-addon" ><i style = "margin-left:10px;" class="fa fa-search"></i></div>
</div>

<div class = "video">

    <video class ='videos' width="700" height="400" controls>
           
    </video> 


    <p class = "extitle"></p>
       <br>
    <div style = "padding-bottom:20%; white-space: pre-line;" class = 'exdesc'> 
    </div>
</div>

<div style = "margin-left:10px;" class="card playlist">
    <div class="card-header">
      Library
    </div>
    <ul class="list-group list-group-flush">
        {% for r in result %}
        <li id = "cali{{loop.index}}" class="list-group-item">{{r.title}}</li>
        {% endfor %}
        
    </ul>
</div>

{% endblock %}

{% block script %}

<script>
    

$( document ).ready(function() {

  // Simple Search
  $('.form-control').keyup(function(){
   var valThis = $(this).val().toLowerCase();
    $('.list-group >li').each(function(){
     var text = $(this).text().toLowerCase();
        (text.indexOf(valThis) == 0) ? $(this).show() : $(this).hide();  //if-else shorthand          
   });
  });


    $('.list-group-item').on('click', function() {
        var value = $(this).text()
        req = $.ajax({
        url : "{{url_for('libtitle')}}",
        type : 'POST',
        data : JSON.stringify({title : value}),
        contentType: 'application/json;charset=UTF-8',
        dataType: "json"
    });

        req.done(function(data) {
        $('#exvid').remove()
        $('.videos').append( '<source id = "exvid" ' + 'src=' +  ' "/static/assets/' + data.link + ' " ' + ' type="video/mp4">')
        $('.extitle').html(data.title);
        $('.exdesc').html(data.desc);
        });
    });


});



</script>

{% endblock %}
